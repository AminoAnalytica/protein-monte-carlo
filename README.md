# Proteinâ€‘MC

Minimal Metropolis Monteâ€‘Carlo optimiser for **protein sequence design** (publication build accompanying the preprint).

---

## ðŸš€ Installation

### 1. Quick test (install directly from GitHub)

```bash
pip install git+https://github.com/AminoAnalytica/protein-monte-carlo.git
```

*(pulls `pyproject.toml` and installs the published `proteinâ€‘mc` package)*

### 2. Editable clone (development mode)

```bash
git clone https://github.com/AminoAnalytica/protein-monte-carlo.git
cd protein-monte-carlo
pip install -e ".[dev]"   # installs with dev extras from pyproject.toml
```

> **Tipâ€¯â€”â€¯GPU:** set `model.device: "cuda:0"` in your YAML config.

---

## âš¡ Quickstart

1. **Grab a config** (YAML or JSON). Save the snippet below as `example_config.yml`:

```yaml
model:
  device: cpu           # "cuda:0" for GPU

sim:
  sequence_file: ../data/demo_sequences.csv
  sequence_index: 0
  beta: 0.5
  num_steps: 100
  protected_positions: [10, 25]  # optional 1â€‘based positions
  status_frequency: 10

paths:
  results_dir: ./results
```

2. **Run the optimiser**

```bash
# console script autogenerated by pyproject [project.scripts]
protein-mc-run --config example_config.yml --output results.csv

# or module entryâ€‘point
python -m protein_mc.cli.run_simulation --config example_config.yml -o results.csv
```

Example progress output:

```
step   10 | Î”E=+0.00360 | âœ“ p=0.997 | hamming=8 | seq=MKSQYIAKQRQISMIKSHCSâ€¦ | 00:00 elapsed, 00:00 left
```

3. **Inspect results**Â â€” `results.csv` contains perâ€‘step Î”E, acceptance flag, live sequence, and Hamming distance.

---

## ðŸ§  How it works (30â€‘second tour)

| component            | role                                                      |
| -------------------- | --------------------------------------------------------- |
| `models.esm_wrapper` | Loads an ESM2â€‘T6 (8â€¯M) HF **featureâ€‘extraction** pipeline |
| `core.sequence_ops`  | Generates singleâ€‘point mutants & caches embeddings        |
| `core.energy`        | Computes Î”E = Î±â€¯Â·â€¯(E<sub>mut</sub>Â âˆ’Â E<sub>prev</sub>)    |
| `core.monte_carlo`   | Metropolis sampler in embedding space                     |
| `utils.progress`     | Uniform progress reporter                                 |

Everything is pureâ€‘Python; no custom CUDA kernels.

---

## ðŸ“„ Cite

> **RajendranÂ A.** *Proteinâ€‘MC: Minimal Monteâ€‘Carlo optimiser for protein sequence design*. **bioRxiv** (2025). DOI: *coming soon*
> Software releaseÂ v0.1.0 (Zenodo): DOI *coming soon*

---

## ðŸªª License

MITÂ â€” fork it, cite it, improve it.
